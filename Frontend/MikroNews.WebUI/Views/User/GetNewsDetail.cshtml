@model UpdateNewsDto
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>GetNewsDetail</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>

    <div style="background-color:rgb(237,241,241)" class="container col-10 mt-5">
        <br />
        <h3 style="color:red">@Model.Title</h3>
        <hr />
        <br />

        <div id="news-container"></div>

        <br />
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Retrieve the description and image URL from the Razor model
            const description = `@Html.Raw(Model.Description)`;
            const imageUrl = `@Url.Content("~/CmsFiles/" + Model.ImageUrl)`;

            function insertImageAfterWord(description, wordLimit) {
                // Split the description into sentences
                const sentences = description.split(/(?<=[.!?])\s+/);

                // Flatten the sentences into words and find the split point
                let wordCount = 0;
                let textBeforeImage = '';
                let textAfterImage = '';
                let imageInserted = false;

                for (const sentence of sentences) {
                    const wordsInSentence = sentence.split(/\s+/);

                    if (wordCount + wordsInSentence.length <= wordLimit) {
                        textBeforeImage += sentence + ' ';
                        wordCount += wordsInSentence.length;
                    } else {
                        textAfterImage += sentence + ' ';
                        imageInserted = true;
                    }
                }

                if (!imageInserted) {
                    return description; // Return as is if not enough words to split
                }

                return `
                        <p>${textBeforeImage.trim()}</p>
                        <img style="height:600px" width="100%" src="${imageUrl}" alt="Image" class="img-fluid" />
                        <p>${textAfterImage.trim()}</p>
                    `;
            }

            document.getElementById('news-container').innerHTML = `
                    ${insertImageAfterWord(description, 40)}
                
                `;
        });
    </script>


</body>
</html>
